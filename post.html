<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>TestAPP</title>
</head>
<body>

<ul>

</ul>


<script>
    (function () {

        'use sctrict';

        if ( localStorage.getItem('token') ) {
            fetch('http://localhost:8080/api/posts', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + localStorage.getItem('token')
                }
            })
                .then(response => {
                    return response.json()
                })
                .then(data => {
                    let li = '';
                    data.forEach( (post, index) => {
                        li += '<li>' + post.title + '</li>';
                    })
                    document.querySelector('ul').innerHTML = li;
                })
        }

    })();
</script>
</body>
</html>